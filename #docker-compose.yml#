version: '3'

services:
  main-server:
    build: server
    ports:
      - "3000:3000"
    restart: always
    volumes:
      - ./volumes/web-server:/home

  database-server:
    image: mysql
    ports:
      - "3306:3306"
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: sirene
    volumes:
      - ./volumes/database-server:/var/lib/mysql
      - ./resources/docker-sql/:/docker-entrypoint-initdb.d

  database-search-engine:
    image: 'elasticsearch'
    ports:
      - "9200:9200"
    restart: always
    volumes:
      - ./volumes/database-search-engine:/home
